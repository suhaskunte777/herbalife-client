import{_ as q,i as R,l as j,m as G,j as J,s as i,a as m,c as g,w as y,f as e,g as x,t as w,k as p,p as Q,u as l,q as d,v as u,e as b,b as W,T as X,h as Z,F as ee,x as se,y as te,n as k,z as ae,A as le}from"./index-0XO5Nko-.js";import{_ as oe}from"./AuthHeader-UjLprxd0.js";import{I as f}from"./InputError-aQZSOD7q.js";import{K as ie,N as re,r as de,H as ne,B as ue,U as ce,a as me}from"./ChevronUpDownIcon--D-4DnJR.js";const o=h=>(ae("data-v-deac4b15"),h=h(),le(),h),ge={class:"py-12"},pe={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},fe={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},ye=["value","data-label"],be=["onSubmit"],_e=o(()=>e("h2",{class:"text-base font-semibold leading-7 text-gray-900"}," Personal Information ",-1)),he={class:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-4"},ve={class:"sm:col-span-2"},xe=o(()=>e("label",{for:"referredBy",class:"block text-sm font-medium leading-6 text-gray-900"},"Referred By",-1)),we={class:"mt-2"},ke={class:"sm:col-span-2"},Ne={class:"relative mt-2"},De={class:"flex items-center"},Ve=["src"],Be={class:"ml-3 block truncate"},Ce={class:"pointer-events-none absolute inset-y-0 right-0 ml-3 flex items-center pr-2"},Fe={class:"flex items-center"},Ue=["src"],Ye={class:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},Te={class:"sm:col-span-2"},ze=o(()=>e("label",{for:"firstName",class:"block text-sm font-medium leading-6 text-gray-900"},"First name",-1)),Ae={class:"mt-2"},Se={class:"sm:col-span-2"},Ee=o(()=>e("label",{for:"middleName",class:"block text-sm font-medium leading-6 text-gray-900"},"Middle name",-1)),Ie={class:"mt-2"},Me={class:"sm:col-span-2"},Oe=o(()=>e("label",{for:"lastName",class:"block text-sm font-medium leading-6 text-gray-900"},"Last name",-1)),Pe={class:"mt-2"},je={class:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-3"},$e={class:"sm:col-span-1"},Le=o(()=>e("label",{for:"date_of_birth",class:"block text-sm font-medium leading-6 text-gray-900"},"Birth Date",-1)),He={class:"mt-2"},Ke={class:"sm:col-span-1"},qe=o(()=>e("label",{for:"year_of_birth",class:"block text-sm font-medium leading-6 text-gray-900"},"Birth Year",-1)),Re={class:"mt-2"},Ge={class:"sm:col-span-1"},Je=o(()=>e("label",{for:"age",class:"block text-sm font-medium leading-6 text-gray-900"},"Age",-1)),Qe={class:"mt-2"},We=o(()=>e("h2",{class:"text-base font-semibold leading-7 py-4 h-0 text-gray-900"}," Contact Information ",-1)),Xe={class:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},Ze={class:"sm:col-span-3"},es=o(()=>e("label",{for:"phone",class:"block text-sm font-medium leading-6 text-gray-900"},"Phone",-1)),ss={class:"relative mt-2 rounded-md shadow-sm"},ts={class:"absolute inset-y-0 left-0 flex items-center"},as=o(()=>e("option",null,"+91",-1)),ls=o(()=>e("option",null,"+61",-1)),os=o(()=>e("option",null,"+1",-1)),is=[as,ls,os],rs={class:"sm:col-span-3"},ds=o(()=>e("label",{for:"email",class:"block text-sm font-medium leading-6 text-gray-900"},"Email",-1)),ns={class:"mt-2"},us={class:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-2"},cs={class:"sm:col-span-1"},ms=o(()=>e("label",{for:"address1",class:"block text-sm font-medium leading-6 text-gray-900"},"Address Line 1 ",-1)),gs={class:"mt-2"},ps={class:"sm:col-span-1"},fs=o(()=>e("label",{for:"address2",class:"block text-sm font-medium leading-6 text-gray-900"},"Address Line 2 ",-1)),ys={class:"mt-2"},bs={class:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-4"},_s={class:"sm:col-span-1"},hs=o(()=>e("label",{for:"zip",class:"block text-sm font-medium leading-6 text-gray-900"},"Pincode ",-1)),vs={class:"mt-2"},xs=["value"],ws={class:"sm:col-span-1"},ks=o(()=>e("label",{for:"city",class:"block text-sm font-medium leading-6 text-gray-900"},"District ",-1)),Ns={class:"mt-2"},Ds=["disabled"],Vs={class:"sm:col-span-1"},Bs=o(()=>e("label",{for:"state",class:"block text-sm font-medium leading-6 text-gray-900"},"State ",-1)),Cs={class:"mt-2"},Fs=["disabled"],Us={class:"sm:col-span-1"},Ys=o(()=>e("label",{for:"country",class:"block text-sm font-medium leading-6 text-gray-900"},"Country ",-1)),Ts={class:"mt-2"},zs=["disabled"],As=o(()=>e("div",{class:"border-b border-gray-900/10 pb-12"},null,-1)),Ss={class:"mt-6 flex items-center justify-end gap-x-6"},Es=["disabled"],Is={__name:"ClientEdit",setup(h){const $=R(),t=j({referredBy:"",gender:{name:"Male",avatar:"https://images.unsplash.com/photo-1491528323818-fdd1faba62cc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"},firstName:"",middleName:"",lastName:"",countryCode:"+91",phone:"",email:"",birthDate:"",birthDateType:"",birthYear:"",birthYearType:"",age:"",ageType:"",address1:"",address2:"",zip:"",city:"",state:"",country:""}),r=j({disableAddressFields:!1,progress:!0,percentage:0,processing:!1,addressFetched:!1});G(t.value,()=>{N()});const N=()=>{let c=Object.keys(t.value).length,s=Object.values(t.value).filter(_=>_!=="").length,n=Math.round(s/c*100);r.value.percentage=n};J(async()=>{await i.dispatch("getClient",$.params.id),t.value=i.state.currentClient,N()});const L=(c,s)=>{c.zip!==s.target.value&&s.target.value>1e5&&s.target.value<999999&&(r.value.addressFetched=!1),!r.value.addressFetched&&s.target.value>1e5&&s.target.value<999999&&(r.value.disableAddressFields=!0,console.log("API called with value",s.target.value),te.get(`https://api.postalpincode.in/pincode/${s.target.value}`).then(n=>{n.data[0].Status=="Success"&&(c.city=n.data[0].PostOffice[0].District,c.state=n.data[0].PostOffice[0].State,c.country=n.data[0].PostOffice[0].Country),r.value.addressFetched=!0}).catch(n=>{console.log(n)}).finally(()=>{r.value.disableAddressFields=!1})),c.zip=s.target.value},v=c=>{if(c=="birthDate"){const s=new Date(t.value.birthDate);t.value.birthYear=s.getFullYear();const n=new Date;t.value.age=n.getFullYear()-s.getFullYear(),t.value.birthDateType="Exact",t.value.birthYearType="Calculated",t.value.ageType="Calculated"}else if(c=="birthYear"){const s=new Date;t.value.age=s.getFullYear()-t.value.birthYear,t.value.birthDateType="",t.value.birthYearType="Exact",t.value.ageType="calculated"}else if(c=="age"){const s=new Date;t.value.birthYear=s.getFullYear()-t.value.age,t.value.birthDateType="",t.value.birthYearType="calculated",t.value.ageType="Exact"}},H=()=>{r.value.processing=!0;const s={...Object.fromEntries(Object.entries(t.value).filter(([n,_])=>_!=="")),gender:t.value.gender.name.toLowerCase()};i.dispatch("updateClient",s),r.value.processing=!1},K=i.state.genders;return(c,s)=>(m(),g(oe,{title:"Clients"},{default:y(()=>{var n,_,D,V,B,C,F,U,Y,T,z,A,S,E,I,M;return[e("div",ge,[e("div",pe,[e("div",fe,[r.value.progress?(m(),x("progress",{key:0,value:r.value.percentage,class:"w-full [&::-webkit-progress-bar]:rounded-lg [&::-webkit-progress-value]:rounded-lg [&::-webkit-progress-bar]:bg-slate-300 [&::-webkit-progress-value]:bg-green-400 [&::-moz-progress-bar]:bg-green-400",max:"100","data-label":r.value.percentage+"%"},w(r.value.percentage)+" % ",9,ye)):p("",!0),e("form",{class:"p-5 mt-5",onSubmit:Q(H,["prevent"])},[_e,e("div",he,[e("div",ve,[(n=l(i).state.errors)!=null&&n.referredBy?(m(),g(f,{key:0,messages:(_=l(i).state.errors)==null?void 0:_.referredBy,entity:"referredBy"},null,8,["messages"])):p("",!0),xe,e("div",we,[d(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.value.referredBy=a),type:"text",name:"referredBy",id:"referredBy",autocomplete:"referredBy",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[u,t.value.referredBy]])])]),e("div",ke,[b(l(ue),{as:"div",modelValue:t.value.gender,"onUpdate:modelValue":s[1]||(s[1]=a=>t.value.gender=a)},{default:y(()=>[b(l(ie),{class:"block text-sm font-medium leading-6 text-gray-900"},{default:y(()=>[W("Gender ")]),_:1}),e("div",Ne,[b(l(re),{class:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 sm:text-sm sm:leading-6"},{default:y(()=>[e("span",De,[e("img",{src:t.value.gender.avatar,alt:"",class:"h-5 w-5 flex-shrink-0 rounded-full"},null,8,Ve),e("span",Be,w(t.value.gender.name),1)]),e("span",Ce,[b(l(de),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])]),_:1}),b(X,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:y(()=>[b(l(ne),{class:"absolute z-10 mt-1 max-h-56 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:y(()=>[(m(!0),x(ee,null,Z(l(K),a=>(m(),g(l(ce),{as:"template",key:a.id,value:a},{default:y(({active:O,selected:P})=>[e("li",{class:k([O?"bg-indigo-600 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[e("div",Fe,[e("img",{src:a.avatar,alt:"",class:"h-5 w-5 flex-shrink-0 rounded-full"},null,8,Ue),e("span",{class:k([P?"font-semibold":"font-normal","ml-3 block truncate"])},w(a.name),3)]),P?(m(),x("span",{key:0,class:k([O?"text-white":"text-indigo-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[b(l(me),{class:"h-5 w-5","aria-hidden":"true"})],2)):p("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])])]),e("div",Ye,[e("div",Te,[(D=l(i).state.errors)!=null&&D.first_name?(m(),g(f,{key:0,messages:(V=l(i).state.errors)==null?void 0:V.first_name,entity:"first_name"},null,8,["messages"])):p("",!0),ze,e("div",Ae,[d(e("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>t.value.firstName=a),type:"text",name:"firstName",id:"firstName",autocomplete:"firstName",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[u,t.value.firstName]])])]),e("div",Se,[(B=l(i).state.errors)!=null&&B.middle_name?(m(),g(f,{key:0,messages:(C=l(i).state.errors)==null?void 0:C.middle_name,entity:"middle_name"},null,8,["messages"])):p("",!0),Ee,e("div",Ie,[d(e("input",{"onUpdate:modelValue":s[3]||(s[3]=a=>t.value.middleName=a),type:"text",name:"middleName",id:"middleName",autocomplete:"middleName",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[u,t.value.middleName]])])]),e("div",Me,[(F=l(i).state.errors)!=null&&F.last_name?(m(),g(f,{key:0,messages:(U=l(i).state.errors)==null?void 0:U.last_name,entity:"last_name"},null,8,["messages"])):p("",!0),Oe,e("div",Pe,[d(e("input",{"onUpdate:modelValue":s[4]||(s[4]=a=>t.value.lastName=a),type:"text",name:"lastName",id:"lastName",autocomplete:"lastName",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[u,t.value.lastName]])])])]),e("div",je,[e("div",$e,[Le,e("div",He,[d(e("input",{"onUpdate:modelValue":s[5]||(s[5]=a=>t.value.birthDate=a),onInput:s[6]||(s[6]=a=>v("birthDate")),type:"date",name:"date_of_birth",id:"date_of_birth",autocomplete:"date_of_birth",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,544),[[u,t.value.birthDate]])])]),e("div",Ke,[(Y=l(i).state.errors)!=null&&Y.birth_year?(m(),g(f,{key:0,messages:(T=l(i).state.errors)==null?void 0:T.birth_year,entity:"birth_year"},null,8,["messages"])):p("",!0),qe,e("div",Re,[d(e("input",{"onUpdate:modelValue":s[7]||(s[7]=a=>t.value.birthYear=a),onInput:s[8]||(s[8]=a=>v("birthYear")),type:"number",min:"1900",max:"2099",name:"year_of_birth",id:"year_of_birth",autocomplete:"family-name",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,544),[[u,t.value.birthYear]])])]),e("div",Ge,[(z=l(i).state.errors)!=null&&z.age?(m(),g(f,{key:0,messages:(A=l(i).state.errors)==null?void 0:A.age,entity:"age"},null,8,["messages"])):p("",!0),Je,e("div",Qe,[d(e("input",{"onUpdate:modelValue":s[9]||(s[9]=a=>t.value.age=a),onInput:s[10]||(s[10]=a=>v("age")),type:"number",name:"age",id:"age",autocomplete:"age",min:"0",max:"150",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,544),[[u,t.value.age]])])])]),We,e("div",Xe,[e("div",Ze,[(S=l(i).state.errors)!=null&&S.phone?(m(),g(f,{key:0,messages:(E=l(i).state.errors)==null?void 0:E.phone,entity:"phone"},null,8,["messages"])):p("",!0),es,e("div",ss,[e("div",ts,[d(e("select",{"onUpdate:modelValue":s[11]||(s[11]=a=>t.value.countryCode=a),id:"countryCode",name:"countryCode",class:"h-full rounded-md border-0 bg-transparent py-0 pl-2 pr-7 text-gray-500 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm"},is,512),[[se,t.value.countryCode]])]),d(e("input",{"onUpdate:modelValue":s[12]||(s[12]=a=>t.value.phone=a),type:"text",name:"phone",id:"phone",class:"block w-full rounded-md border-0 py-1.5 pl-16 pr-20 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[u,t.value.phone]])])]),e("div",rs,[(I=l(i).state.errors)!=null&&I.email?(m(),g(f,{key:0,messages:(M=l(i).state.errors)==null?void 0:M.email,entity:"email"},null,8,["messages"])):p("",!0),ds,e("div",ns,[d(e("input",{"onUpdate:modelValue":s[13]||(s[13]=a=>t.value.email=a),type:"email",name:"email",id:"email",autocomplete:"email",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[u,t.value.email]])])])]),e("div",us,[e("div",cs,[ms,e("div",gs,[d(e("input",{"onUpdate:modelValue":s[14]||(s[14]=a=>t.value.address1=a),type:"text",name:"address1",id:"address1",autocomplete:"address1",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[u,t.value.address1]])])]),e("div",ps,[fs,e("div",ys,[d(e("input",{"onUpdate:modelValue":s[15]||(s[15]=a=>t.value.address2=a),type:"text",name:"address2",id:"address2",autocomplete:"address2",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[u,t.value.address2]])])])]),e("div",bs,[e("div",_s,[hs,e("div",vs,[e("input",{value:t.value.zip,type:"number",name:"zip",id:"zip",onKeyup:s[16]||(s[16]=a=>L(t.value,a)),autocomplete:"zip",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,40,xs)])]),e("div",ws,[ks,e("div",Ns,[d(e("input",{"onUpdate:modelValue":s[17]||(s[17]=a=>t.value.city=a),disabled:r.value.disableAddressFields,type:"text",name:"city",id:"city",autocomplete:"city",class:"block w-full disabled:bg-slate-300 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Ds),[[u,t.value.city]])])]),e("div",Vs,[Bs,e("div",Cs,[d(e("input",{"onUpdate:modelValue":s[18]||(s[18]=a=>t.value.state=a),disabled:r.value.disableAddressFields,type:"text",name:"state",id:"state",autocomplete:"state",class:"block w-full disabled:bg-slate-300 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,Fs),[[u,t.value.state]])])]),e("div",Us,[Ys,e("div",Ts,[d(e("input",{"onUpdate:modelValue":s[19]||(s[19]=a=>t.value.country=a),disabled:r.value.disableAddressFields,type:"text",name:"country",id:"country",autocomplete:"country",class:"block w-full disabled:bg-slate-300 rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,zs),[[u,t.value.country]])])])]),As,e("div",Ss,[e("button",{type:"submit",disabled:r.value.processing,class:"ounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm disabled:bg-gray-400 hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"}," Sign in ",8,Es)])],40,be)])])])]}),_:1}))}},$s=q(Is,[["__scopeId","data-v-deac4b15"]]);export{$s as default};
